# =============================================================================
# REPORADAR ENVIRONMENT CONFIGURATION
# =============================================================================
# Last Updated: 2025-10-09
# Instructions: Fill in the REQUIRED fields marked with ‚ö†Ô∏è to enable features
# =============================================================================

# -----------------------------------------------------------------------------
# üîê AUTHENTICATION - Neon Auth (Stack Auth)
# -----------------------------------------------------------------------------
# ‚úÖ CONFIGURED - Working
# Get these from: Neon Console -> Auth page -> Configuration tab
NEXT_PUBLIC_STACK_PROJECT_ID='c74a78dc-8038-4049-a29b-a5cb9cdda766'
NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY='pck_92sxv0eahjda9gg8y2qqnmh6tdem9n4tph3r06mx7svf0'
STACK_SECRET_SERVER_KEY='ssk_5nh4d3nmyk2fzct97td61ym744n5faaazk9e2nvzgar18'

# -----------------------------------------------------------------------------
# üóÑÔ∏è DATABASE - Neon PostgreSQL
# -----------------------------------------------------------------------------
# ‚úÖ CONFIGURED - Working
DATABASE_URL='postgresql://neondb_owner:npg_0mpFt1auIfZT@ep-dawn-frost-agk4od4w-pooler.c-2.eu-central-1.aws.neon.tech/neondb?sslmode=require'

# Database Connection Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=5000
DB_POOL_HEALTH_CHECK_INTERVAL=60000
DB_POOL_MAX_RETRIES=3

# Database Query Monitoring
DB_QUERY_MONITORING_ENABLED=true
DB_SLOW_QUERY_THRESHOLD=1000
DB_LOG_SLOW_QUERIES=true
DB_METRICS_RETENTION_DAYS=30

# Database Indexing
DB_AUTO_CREATE_INDEXES=true
DB_ANALYZE_QUERIES_ENABLED=true
DB_OPTIMIZATION_INTERVAL_HOURS=24

# -----------------------------------------------------------------------------
# ü§ñ AI CONFIGURATION - Google Gemini
# -----------------------------------------------------------------------------
# ‚úÖ CONFIGURED - AI features enabled!
GEMINI_API_KEY=AIzaSyCiDNJP5s1ACuDofsBugHmK7hlOrrY2pUw

# -----------------------------------------------------------------------------
# üí≥ PAYMENT PROCESSING - Stripe
# -----------------------------------------------------------------------------
# ‚ö†Ô∏è WARNING: You're using LIVE keys! Switch to TEST keys for development
# ‚úÖ CONFIGURED - Payments enabled
# Get TEST keys from: https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=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
STRIPE_PUBLISHABLE_KEY=pk_live_51Rk85vRoEu2cZuv7v3NEZJm7aG1lXazyNXAU1tg8D92wvJjeNOmgZ81M14ZamyAB1FEI55jeSo2FFXelNeanEzwH00eOAVugjG
STRIPE_WEBHOOK_SECRET=whsec_fzkxomWifNkAsCseEOzgHqXd0MZ4i0WF

# Stripe Product Price IDs (create these in Stripe Dashboard)
# ‚ö†Ô∏è TODO: Create products in Stripe Dashboard and add price IDs here
STRIPE_PRO_PRICE_ID=price_pro_monthly_placeholder
STRIPE_ENTERPRISE_PRICE_ID=price_enterprise_monthly_placeholder

# Application URL for Stripe redirects
APP_URL=http://localhost:3002

# -----------------------------------------------------------------------------
# üíæ CACHING CONFIGURATION
# -----------------------------------------------------------------------------
# Currently using in-memory cache (works for single instance)
CACHE_ENABLED=true
CACHE_TYPE=memory
CACHE_MEMORY_MAX_SIZE=100
CACHE_MEMORY_MAX_ENTRIES=10000
CACHE_DEFAULT_TTL=3600
CACHE_COMPRESSION_ENABLED=true
CACHE_COMPRESSION_THRESHOLD=1024
CACHE_INVALIDATION_STRATEGY=time
CACHE_INVALIDATION_PATTERNS=

# -----------------------------------------------------------------------------
# üî¥ REDIS CONFIGURATION - Upstash
# -----------------------------------------------------------------------------
# ‚úÖ CONFIGURED - Using Upstash Redis (Frankfurt, Germany)
# Endpoint: possible-terrier-21916.upstash.io
# Port: 6379 (TLS enabled)
REDIS_ENABLED=true
USE_REDIS_SESSIONS=true
REDIS_URL=rediss://default:AVWcAAIncDI2YTgxY2I2OGY5OWM0YTcwOTRmOTdkNTU1MDlmMzE0ZHAyMjE5MTY@possible-terrier-21916.upstash.io:6379
REDIS_HOST=possible-terrier-21916.upstash.io
REDIS_PORT=6379
REDIS_PASSWORD=AVWcAAIncDI2YTgxY2I2OGY5OWM0YTcwOTRmOTdkNTU1MDlmMzE0ZHAyMjE5MTY
REDIS_DB=0
REDIS_KEY_PREFIX=reporadar:

# Upstash REST API (alternative connection method)
UPSTASH_REDIS_REST_URL=https://possible-terrier-21916.upstash.io
UPSTASH_REDIS_REST_TOKEN=AVWcAAIncDI2YTgxY2I2OGY5OWM0YTcwOTRmOTdkNTU1MDlmMzE0ZHAyMjE5MTY
# -----------------------------------------------------------------------------
# üîí SESSION CONFIGURATION
# -----------------------------------------------------------------------------
# ‚úÖ CONFIGURED - Session encryption enabled
# Generated with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_SECRET=dev_session_secret_change_for_production_use_openssl_rand
SESSION_ENCRYPTION_KEY=d09ec49c008cdadb043bcee096eeeca89ddc85999c687454fcf71bc013a96b09

# -----------------------------------------------------------------------------
# üóúÔ∏è COMPRESSION CONFIGURATION
# -----------------------------------------------------------------------------
COMPRESSION_ENABLED=true
COMPRESSION_THRESHOLD=1024
COMPRESSION_ALGORITHMS=gzip,brotli
COMPRESSION_LEVEL=6
COMPRESSION_CHUNK_SIZE=16384
COMPRESSION_MEM_LEVEL=8
COMPRESSION_EXCLUDE_CONTENT_TYPES=image/*,video/*,audio/*

# -----------------------------------------------------------------------------
# üêô GITHUB API CONFIGURATION
# -----------------------------------------------------------------------------
# ‚úÖ CONFIGURED - Token is set
# Optional but recommended for higher rate limits (5000/hour vs 60/hour)
# Get token from: https://github.com/settings/tokens
# Required scopes: public_repo (or repo for private repos)
GITHUB_TOKEN=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
GITHUB_OPTIMIZATION_ENABLED=true
GITHUB_BATCH_SIZE=10
GITHUB_BATCH_DELAY=100
GITHUB_RATE_LIMIT_BUFFER=10
GITHUB_CACHE_TTL=300
GITHUB_MAX_RETRIES=3
GITHUB_BACKOFF_MULTIPLIER=2
GITHUB_MAX_BACKOFF=30000
GITHUB_CACHING_ENABLED=true
GITHUB_CACHABLE_ENDPOINTS=/repos,/users,/orgs
GITHUB_EXCLUDE_ENDPOINTS=/user/emails,/user/keys

# -----------------------------------------------------------------------------
# ‚ö° FRONTEND PERFORMANCE CONFIGURATION
# -----------------------------------------------------------------------------
FRONTEND_CODE_SPLITTING_ENABLED=true
FRONTEND_CODE_SPLITTING_STRATEGY=hybrid
FRONTEND_CHUNK_SIZE_WARNING=1000
FRONTEND_PRELOAD_CRITICAL_CHUNKS=true
FRONTEND_LAZY_LOADING_ENABLED=true
FRONTEND_LAZY_LOADING_THRESHOLD=0.1
FRONTEND_LAZY_LOADING_ROOT_MARGIN=50px
FRONTEND_PRELOAD_DISTANCE=200
FRONTEND_TREE_SHAKING_ENABLED=true
FRONTEND_STATIC_CACHE_DURATION=31536000
FRONTEND_JS_CACHE_DURATION=31536000
FRONTEND_CSS_CACHE_DURATION=31536000
FRONTEND_SERVICE_WORKER_ENABLED=false

# -----------------------------------------------------------------------------
# üìä PERFORMANCE MONITORING
# -----------------------------------------------------------------------------
PERFORMANCE_MONITORING_ENABLED=true
METRICS_COLLECTION_INTERVAL=60
METRICS_BATCH_SIZE=100
METRICS_RETENTION_DAYS=30

# Performance Alerting
PERFORMANCE_ALERTING_ENABLED=true
ALERT_THRESHOLD_DB_QUERY_TIME=1000
ALERT_THRESHOLD_API_RESPONSE_TIME=2000
ALERT_THRESHOLD_FRONTEND_LOAD_TIME=3000
ALERT_THRESHOLD_CACHE_HIT_RATE=80
ALERT_THRESHOLD_ERROR_RATE=5
ALERT_CHANNELS=console

# Performance Dashboard
PERFORMANCE_DASHBOARD_ENABLED=true
DASHBOARD_REFRESH_INTERVAL=30
DASHBOARD_HISTORICAL_DATA_DAYS=7

# -----------------------------------------------------------------------------
# üîÑ FALLBACK CONFIGURATION
# -----------------------------------------------------------------------------
DB_CONNECTION_POOL_FALLBACK_ENABLED=true
DB_DIRECT_CONNECTION_TIMEOUT=10000
DB_FALLBACK_MAX_RETRY_ATTEMPTS=3
CACHE_FALLBACK_TO_DIRECT_RETRIEVAL=true
CACHE_RECOVERY_BACKOFF=5000
CACHE_MAX_RECOVERY_ATTEMPTS=3
FRONTEND_SYNCHRONOUS_FALLBACK_ENABLED=true
FRONTEND_IMMEDIATE_FALLBACK_ENABLED=true
FRONTEND_FALLBACK_TIMEOUT=5000

# -----------------------------------------------------------------------------
# üö© FEATURE FLAGS
# -----------------------------------------------------------------------------
# Set to false to disable specific features for rollback
FEATURE_LOADINGSTATES=true
FEATURE_ERRORHANDLING=true
FEATURE_ANALYTICSTRACKING=true
FEATURE_BACKGROUNDJOBS=true
FEATURE_MOBILERESPONSIVE=true
FEATURE_ACCESSIBILITY=true
FEATURE_ADMINDASHBOARD=true
FEATURE_HEALTHCHECKS=true
FEATURE_HORIZONTALSCALING=true
FEATURE_MONITORING=true

# -----------------------------------------------------------------------------
# üåç APPLICATION ENVIRONMENT
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3002

# -----------------------------------------------------------------------------
# üîê PASSWORD SECURITY
# -----------------------------------------------------------------------------
BCRYPT_ROUNDS=12

# -----------------------------------------------------------------------------
# üìß EMAIL SERVICE CONFIGURATION
# -----------------------------------------------------------------------------
# ‚ö†Ô∏è TODO: Configure email service for password reset
# Get your API key from https://resend.com/api-keys
RESEND_API_KEY=your_resend_api_key_here
EMAIL_FROM=noreply@reporadar.com
EMAIL_FROM_NAME=RepoRadar
PASSWORD_RESET_URL=http://localhost:3002/reset-password

# -----------------------------------------------------------------------------
# üö¶ RATE LIMITING CONFIGURATION
# -----------------------------------------------------------------------------
# Storage: memory (single instance), redis (multi-instance), or postgres (fallback)
RATE_LIMIT_STORAGE=memory
RATE_LIMIT_REDIS_URL=rediss://default:AVWcAAIncDI2YTgxY2I2OGY5OWM0YTcwOTRmOTdkNTU1MDlmMzE0ZHAyMjE5MTY@possible-terrier-21916.upstash.io:6379

# Authentication Rate Limits
RATE_LIMIT_AUTH_LOGIN_LIMIT=5
RATE_LIMIT_AUTH_LOGIN_WINDOW=900000
RATE_LIMIT_AUTH_SIGNUP_LIMIT=3
RATE_LIMIT_AUTH_SIGNUP_WINDOW=3600000
RATE_LIMIT_AUTH_RESET_LIMIT=3
RATE_LIMIT_AUTH_RESET_WINDOW=3600000

# API Rate Limits (per tier)
RATE_LIMIT_API_FREE_LIMIT=100
RATE_LIMIT_API_FREE_WINDOW=3600000
RATE_LIMIT_API_PRO_LIMIT=1000
RATE_LIMIT_API_PRO_WINDOW=3600000

# Analysis Rate Limits (per tier)
RATE_LIMIT_ANALYSIS_FREE_LIMIT=10
RATE_LIMIT_ANALYSIS_FREE_WINDOW=86400000
RATE_LIMIT_ANALYSIS_PRO_LIMIT=100
RATE_LIMIT_ANALYSIS_PRO_WINDOW=86400000

# -----------------------------------------------------------------------------
# üîí HTTPS ENFORCEMENT CONFIGURATION
# -----------------------------------------------------------------------------
# Set to true in production to enforce HTTPS
FORCE_HTTPS=false
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=false

# -----------------------------------------------------------------------------
# üõ°Ô∏è SECURITY HEADERS CONFIGURATION
# -----------------------------------------------------------------------------
SECURITY_HEADERS_ENABLED=true
CSP_ENABLED=true
CSP_DIRECTIVES=default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://api.github.com https://accounts.google.com https://github.com

# -----------------------------------------------------------------------------
# üîê SESSION SECURITY CONFIGURATION
# -----------------------------------------------------------------------------
SESSION_REGENERATE_ON_LOGIN=true
SESSION_TRACK_METADATA=true
SESSION_TIMEOUT=604800000
SESSION_SLIDING_WINDOW=true
SESSION_SUSPICIOUS_ACTIVITY_CHECK=true

# =============================================================================
# END OF CONFIGURATION
# =============================================================================

# Enable Gemini API request queuing (useful for free tier API keys)
# Set to false when using a paid Google Cloud API key with high limits
GEMINI_USE_QUEUE=false
